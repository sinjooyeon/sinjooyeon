<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>simpletodo</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      background-color: gray;

      margin: 0%;
      padding: 0%;
      font-family: "Poppins", sans-serif;
    }

    .main {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    h1 {
      color: white;
      font-size: 60px;
      margin: 0 20px;
    }

    .todolist {
      width: 500px;
      min-height: 300px;
      border: 2px solid white;

      padding: 20px 20px 100px 20px;
      margin-top: 30px;
      background-image: gray;
    }

    .todolist li {
      color: white;
      font-size: 24px;
      margin-left: 20px;
      margin-bottom: 10px;
      padding-bottom: 5px;

      border-bottom: 1px solid white;
      word-break: break-word;
    }

    li button {
      float: right;
      color: rgb(133, 133, 133);
      margin-left: 5px;
      font-size: 20px;
      border-radius: 5px;
      border: 0px solid transparent;
      border: 1px solid white;
      transition: 0.2s all ease-in-out;
    }

    li button:hover {
      background-color: gray;
      color: white;
    }

    #inputtask {
      min-width: 300px;
      padding: 10px 15px;
      border-radius: 10px;
      border: 0px solid transparent;
      font-size: 24px;
      margin-right: 10px;
      color: gray;
    }

    #inputtask:focus {
      outline: none;
    }

    #addbutton,
    .clear {
      color: gray;
      font-weight: 500;
      font-size: 24px;
      border-radius: 5px;
      border: 0px solid transparent;
      padding: 10px 15px;
      cursor: pointer;
      border: 1px solid rgb(255, 255, 255);
      transition: 0.3s all ease-in-out;
    }

    #addbutton:hover,
    .clear:hover {
      background-color: gray;
      color: white;
      transform: scale(0.97);
    }

    .d-none {
      display: none;
    }

    li span:focus {
      background-color: white;
      color: black;
      outline: none;
      padding: 0 5px;
      display: inline-block;
      min-width: 300px;
      max-width: 400px;
    }

    .link {
      text-align: center;
      margin: 20px;
    }

    .link a {
      color: white;
    }

    #one {
      display: flex;
      justify-content: center;
    }

    .popover {
      position: absolute;
      z-index: 1000;
      display: none;
      width: 200px;
      padding: 10px;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
    }

    .popover-arrow {
      position: absolute;
      width: 0;
      height: 0;
      border-style: solid;
    }

    .popover-arrow[data-placement="left"] {
      top: 50%;
      left: 100%;
      margin-top: -5px;
      border-width: 5px 0 5px 5px;
      border-color: transparent transparent transparent #ccc;
    }

    .popover-arrow[data-placement="top"] {
      bottom: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px 5px 0 5px;
      border-color: #ccc transparent transparent transparent;
    }

    .popover-arrow[data-placement="bottom"] {
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 0 5px 5px 5px;
      border-color: transparent transparent #ccc transparent;
    }

    .popover-arrow[data-placement="right"] {
      top: 50%;
      right: 100%;
      margin-top: -5px;
      border-width: 5px 5px 5px 0;
      border-color: transparent #ccc transparent transparent;
    }
  </style>
</head>

<body>
  <div class="main">
    <h1 tabIndex="0">TO DO LIST</h1>

    <form class="form">
      <input id="inputtask" type="text" placeholder="Enter your task here" autofocus />
      <input id="addbutton" value="Add Task" type="submit" />
    </form>
    <ol class="todolist"></ol>
    <button class="clear d-none">Clear All</button>
  </div>
  <section id="one" class="i-row i-row-odd">
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center">
          <h2 class="section-title">Popover 1</h2>
          <div class="section-body">
            <button type="button" class="btn btn-success" data-toggle="popover" data-placement="left" data-content="오징어순대머글래?">아줌마</button>
            <button type="button" class="btn btn-success" data-toggle="popover" data-placement="top" data-content="싫엇~~~~!!!!!!!!">아저씨</button>
            <button type="button" class="btn btn-success" data-toggle="popover" data-placement="bottom" data-content="난 안 좋아함">꼬맹이</button>
            <button type="button" class="btn btn-success" data-toggle="popover" data-placement="right" data-content="나도 안먹엇!!!!">몽총이</button>
          </div>
        </div>
      </div>
    </div>
  </section>


  <div id="popover" class="popover">
    <div class="popover-arrow"></div>
    <div class="popover-content"></div>
  </div>

  <script>

    const inputTask = document.querySelector("#inputtask");
    const form = document.querySelector(".form");
    const addButton = document.querySelector("#addbutton");
    const toDoList = document.querySelector(".todolist");
    const clear = document.querySelector(".clear");


    function loadTasks() {
      const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      tasks.forEach(task => {
        const newTask = createNewItem(task);
        toDoList.appendChild(newTask);
      });
      if (tasks.length > 0) {
        clear.classList.remove("d-none");
      }
    }

    function saveTasks() {
      const tasks = [];
      toDoList.querySelectorAll("li span").forEach(span => {
        tasks.push(span.textContent);
      });
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }


    function createNewItem(inputValue) {
      const task = document.createElement("li");
      const span = document.createElement("span");
      const delBtn = document.createElement("button");
      const editBtn = document.createElement("button");
      span.textContent = inputValue;
      delBtn.textContent = "Delete";
      editBtn.textContent = "Edit";
      task.appendChild(span);
      task.appendChild(delBtn);
      task.appendChild(editBtn);

      delBtn.addEventListener("click", function () {
        task.parentNode.removeChild(task);
        saveTasks();
      });

      editBtn.addEventListener("click", function () {
        span.contentEditable = true;
        span.focus();
        span.addEventListener("blur", function () {
          span.contentEditable = false;
          saveTasks();
        });
      });

      return task;
    }

    form.addEventListener("submit", function (event) {
      event.preventDefault();
      if (inputTask.value == "") {
        alert("please add Some Text");
      } else {
        const newTask = createNewItem(inputTask.value);
        toDoList.appendChild(newTask);
        inputTask.value = "";
        inputTask.focus();
        clear.classList.remove("d-none");
        saveTasks();
      }
    });

    clear.addEventListener("click", function () {
      toDoList.innerHTML = "";
      localStorage.removeItem('tasks');
      clear.classList.add("d-none");
    });


    loadTasks();
    document.addEventListener('DOMContentLoaded', function () {
      var popover = document.getElementById('popover');
      var popoverContent = popover.querySelector('.popover-content');
      var popoverArrow = popover.querySelector('.popover-arrow');

      document.querySelectorAll('[data-toggle="popover"]').forEach(function (button) {
        button.addEventListener('click', function () {
          var content = button.getAttribute('data-content');
          var placement = button.getAttribute('data-placement');
          popoverContent.innerHTML = content;
          popoverArrow.setAttribute('data-placement', placement);
          popover.style.display = 'block';

          var rect = button.getBoundingClientRect();
          var popoverRect = popover.getBoundingClientRect();

          if (placement === 'left') {
            popover.style.top = rect.top + window.scrollY + (rect.height / 2) - (popoverRect.height / 2) + 'px';
            popover.style.left = rect.left + window.scrollX - popoverRect.width - 10 + 'px';
          } else if (placement === 'top') {
            popover.style.top = rect.top + window.scrollY - popoverRect.height - 10 + 'px';
            popover.style.left = rect.left + window.scrollX + (rect.width / 2) - (popoverRect.width / 2) + 'px';
          } else if (placement === 'bottom') {
            popover.style.top = rect.top + window.scrollY + rect.height + 10 + 'px';
            popover.style.left = rect.left + window.scrollX + (rect.width / 2) - (popoverRect.width / 2) + 'px';
          } else if (placement === 'right') {
            popover.style.top = rect.top + window.scrollY + (rect.height / 2) - (popoverRect.height / 2) + 'px';
            popover.style.left = rect.left + window.scrollX + rect.width + 10 + 'px';
          }
        });
      });

      document.addEventListener('click', function (event) {
        if (!event.target.matches('[data-toggle="popover"]')) {
          popover.style.display = 'none';
        }
      });
    });
  </script>


</body>

</html>